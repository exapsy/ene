kind: e2e_test:v1
name: api-unit-tests

fixtures:
  - name: content_type_inline
    value: application/json; charset=utf-8

units:
  - name: app
    kind: httpmock
    app_port: 8080
    routes:
      - path: /healthcheck
        method: GET
        response:
          status: 200
          body:
            data: ok
          headers:
            Content-Type: "{{ content_type_inline }}"

target: app

tests:
  - name: ping
    kind: http
    request:
      path: /v1/health
      method: GET
      timeout: 5s
    expect:
      status: 200
      body_asserts:
        - path: data
          present: true
          equal: "ok"
      header_asserts:
        - name: Content-Type
          present: true
          equal: "{{ content_type_inline }}"
